{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Implement passkey-based admin access flow; fix unauthorized access by adding an admin login screen that calls authenticateAdmin using an admin code.",
  "architectural_notes": [
    "Admin authorization requires calling backend authenticateAdmin(adminCode) after passkey login to assign admin role.",
    "Admin login screen will collect the admin code (Ved_ansh@04) and trigger authenticateAdmin to activate admin access."
  ],
  "known_issues": [
    "Passkey login currently results in 'Unauthorized' on admin pages because authenticateAdmin is not being called / admin role not assigned."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-ensure-the-admin-route-guard-presents-a-dedicated-admin-login-screen-that-1-requires-the-user-to-log-in-with-internet-identity-and-then-2-prompts-for-the-admin-code-and-on-submit-calls-the-backend-method-authenticateadmin-passkey-to-grant-the-logged-in-principal-admin-rights",
      "title": "Ensure the admin route guard presents a dedicated admin login screen that (1) requires the user to log in with Internet Identity and then (2) prompts for the admin code, and on submit calls the backend method authenticateAdmin(passkey) to grant the logged-in principal admin rights.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-use-the-admin-code-value-exactly-as-provided-ved-ansh-04-for-backend-verification-and-ensure-frontend-error-handling-maps-backend-failures-e-g-invalid-passkey-unauthorized-into-clear-english-error-messages-in-the-admin-login-screen",
      "title": "Use the admin code value exactly as provided (\"Ved_ansh@04\") for backend verification, and ensure frontend error handling maps backend failures (e.g., \"Invalid passkey\" / \"Unauthorized\") into clear, English error messages in the admin login screen.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-after-successful-admin-authentication-persist-an-admin-unlocked-session-flag-for-the-current-browser-session-and-automatically-clear-it-on-admin-logout-and-on-any-backend-unauthorized-response-from-admin-only-api-calls",
      "title": "After successful admin authentication, persist an “admin unlocked” session flag for the current browser session and automatically clear it on admin logout and on any backend Unauthorized response from admin-only API calls.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add admin login screen (admin code: Ved_ansh@04) that triggers authenticateAdmin after passkey login to resolve unauthorized access",
      "reqIds": [],
      "status": "in_progress"
    }
  ],
  "projectName": "Fix admin unauthorized access by adding admin code login prompt that calls authenticateAdmin(\"Ved_ansh@04\")",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}